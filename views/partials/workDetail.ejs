<!-- workDetail.ejs -->
<div id="globalOverlay">
  <button id="toggleDeviceBtn" class="btn popup-btn">üì±/üíª</button>
  <a id="popupEditBtn" href="/edit" class="btn popup-btn">‚úèÔ∏è</a>
</div>

<div class="viewer-page">
  
  <!-- ‚ñº „É©„ÉÉ„Éó„Ç≥„É≥„ÉÜ„Éä„ÇíËøΩÂä† (‰ªªÊÑè„ÅÆ„ÇØ„É©„ÇπÂêç„ÅßOK) -->
  <div class="viewer-container">
  
    <!-- „Éá„Çπ„ÇØ„Éà„ÉÉ„ÉóÁâà -->
    <div id="desktopView" class="desktop-view">
      
      <div class="work-card">
        <div class="thumbnail-wrapper">
          <img src="<%= work.thumbnailUrl %>" alt="<%= work.title %>" class="static-image" />
          <% if (work.thumbnailVideoUrl) { %>
            <video 
              src="<%= work.thumbnailVideoUrl %>"
              muted
              playsinline
              preload="metadata"
              class="hover-video hidden"
            ></video>
          <% } %>
        </div>
        
        <div class="hero-info">
          <h1 class="work-title"><%= work.title %></h1>
          <button id="toggleDetailBtn" class="btn detail-btn">Ë©≥Á¥∞„ÇíË¶ã„Çã</button>
          <div id="detailArea" class="hidden">
            <% if (work.releaseDate) { %>
              <p>ÂÖ¨ÈñãÂπ¥: <%= work.releaseDate %></p>
            <% } %>
            <% if (work.rating) { %>
              <p>„É¨„Éº„ÉÜ„Ç£„É≥„Ç∞: <%= work.rating %></p>
            <% } %>
            <% if (work.cast) { %>
              <p>„Ç≠„É£„Çπ„Éà: <%= work.cast %></p>
            <% } %>
            <% if (work.studio) { %>
              <p>Âà∂‰Ωú‰ºöÁ§æ: <%= work.studio %></p>
            <% } %>
          </div>
        </div>
      </div><!-- /.work-card -->

      <section class="episode-section">
        <h2>„Ç®„Éî„ÇΩ„Éº„Éâ</h2>
        <% if (episodes && episodes.length > 0) { %>
          <% episodes.forEach((ep, i) => { %>
            <div class="episode-card">
              <div class="episode-thumb-wrapper">
                <video controls src="<%= ep.cloudinaryUrl %>" class="episode-video"></video>
              </div>
              <div class="episode-info">
                <h3><%= ep.title || 'ÁÑ°È°å' %></h3>
      
                <!-- ‚ñº „ÅÇ„Çâ„Åô„Åò -->
                <% if (ep.description) { %>
                  <p><%= ep.description %></p>
                <% } %>
      
                <!-- ‚ñº ÂãïÁîªÊôÇÈñì -->
                <% if (ep.duration) { %>
                  <p><%= ep.duration %> ÂàÜ</p>
                <% } %>
      
                <!-- ‚ñº ÈáëÈ°ç (ÊúâÊñô/ÁÑ°Êñô) -->
                <% if (ep.price) { %>
                  <p><%= ep.price %> ÂÜÜ</p>
                <% } else { %>
                  <p>ÁÑ°Êñô</p>
                <% } %>
              </div>
            </div>
          <% }) %>
        <% } else { %>
          <p>„Ç®„Éî„ÇΩ„Éº„Éâ„Åå„Åæ„Å†„ÅÇ„Çä„Åæ„Åõ„Çì„ÄÇ</p>
        <% } %>
      </section>
      
    </div><!-- /#desktopView -->

    <!-- „É¢„Éê„Ç§„É´Áâà -->
    <div id="mobileView" class="mobile-view hidden">
      <div class="phone-frame">
        <div class="phone-notch"></div>
        <div class="phone-screen">
          <!-- ÁúÅÁï• or ÂêåÊßò„ÅÆ„Éá„Ç∂„Ç§„É≥„ÅßË°®Á§∫ -->
        </div>
      </div>
    </div><!-- /#mobileView -->
    
  </div><!-- /.viewer-container -->
</div>

<script src="/js/workDetail.js"></script>
