# Views Studio システム概要

## アーキテクチャ

Views Studioは、Node.js/Express.jsをベースにしたMVCアーキテクチャを採用したWebアプリケーションです。

### システム構成図

```
+------------------+     +------------------+     +------------------+
|                  |     |                  |     |                  |
|  クライアント     |<--->|  Express.js      |<--->|  MongoDB        |
|  (ブラウザ)       |     |  アプリケーション |     |  データベース    |
|                  |     |                  |     |                  |
+------------------+     +--------^---------+     +------------------+
                                  |
                                  v
                         +------------------+
                         |                  |
                         |  Cloudinary      |
                         |  (メディアストレージ)|
                         |                  |
                         +------------------+
```

### データフロー

1. ユーザーがブラウザからリクエストを送信
2. Express.jsアプリケーションがリクエストを受け取り、適切なルートハンドラを実行
3. 必要に応じてMongoDBからデータを取得または更新
4. 動画・画像ファイルはCloudinaryに保存・取得
5. レスポンスをEJSテンプレートでレンダリングしてユーザーに返す

## 技術スタック

### バックエンド
- **Node.js**: サーバーサイドJavaScript実行環境
- **Express.js**: Webアプリケーションフレームワーク
- **MongoDB**: NoSQLデータベース
- **Mongoose**: MongoDBのODM（Object Document Mapper）
- **method-override**: HTTPメソッドのオーバーライド（PUT/DELETEリクエスト対応）
- **multer**: ファイルアップロード処理
- **cloudinary**: クラウドメディアストレージサービス

### フロントエンド
- **EJS**: サーバーサイドテンプレートエンジン
- **JavaScript**: クライアントサイドの動的機能
- **CSS**: スタイリング
- **Fetch API**: 非同期通信

### 開発ツール
- **nodemon**: 開発時の自動再起動
- **dotenv**: 環境変数管理

## 主要機能

1. **作品管理**
   - 作品の登録、編集、削除
   - サムネイル画像・動画のアップロード
   - タグ、カテゴリ、評価などのメタデータ管理

2. **エピソード管理**
   - エピソードの登録、編集、削除
   - 動画コンテンツのアップロード
   - サムネイル画像の設定
   - 価格設定（無料/有料）

3. **ユーザー体験**
   - 作品一覧表示
   - エピソード視聴
   - 検索・フィルタリング

4. **分析機能**
   - 視聴統計
   - ユーザー行動分析

## ディレクトリ構造

```
views-studio/
├── app.js                # アプリケーションのエントリーポイント
├── models/               # データモデル定義
├── routes/               # ルート定義
├── views/                # EJSテンプレート
│   ├── partials/         # 共通パーツ
│   └── ...
├── public/               # 静的ファイル
│   ├── js/               # クライアントサイドJavaScript
│   ├── css/              # スタイルシート
│   └── images/           # 画像ファイル
├── stylesheet/           # カスタムスタイルシート
├── middleware/           # カスタムミドルウェア
├── utils/                # ユーティリティ関数
└── docs/                 # ドキュメント
```

## 認証と認可

現在のシステムでは、管理者向けの機能として実装されており、一般ユーザー向けの認証システムは将来的な拡張として計画されています。

## 外部サービス連携

### Cloudinary
- 動画・画像ファイルのストレージとして使用
- 自動変換・最適化機能を活用
- ストリーミング配信に対応

## 将来の拡張計画

1. ユーザー認証システムの実装
2. サブスクリプション課金モデルの導入
3. モバイルアプリとの連携API
4. リコメンデーションエンジンの実装

---

このドキュメントは、Views Studioの概要を説明するものです。詳細な実装については、各セクションの専用ドキュメントを参照してください。
